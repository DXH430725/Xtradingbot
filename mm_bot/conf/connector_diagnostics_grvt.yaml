# GRVT connector diagnostics configuration
# Enhanced smoke test with observability and timeline tracking

strategy:
  name: "connector_diagnostics"
  connector_diagnostics:
    test_mode: true
    pause_between_tests_secs: 5.0  # GRVT might need longer intervals
    tasks:
      # Test limit_once mode - single limit order placement and cancellation
      - venue: "grvt"
        symbol: "BTC"
        mode: "limit_once"
        side: "buy"
        min_multiplier: 1.0
        price_offset_ticks: 8  # GRVT might have different tick sizes
        tracking_timeout_secs: 45.0
        cancel_wait_secs: 15.0  # Conservative timeout for GRVT

      # Test tracking_limit mode - continuous limit order tracking
      - venue: "grvt"
        symbol: "BTC"
        mode: "tracking_limit"
        side: "buy"
        min_multiplier: 1.0
        price_offset_ticks: 5
        tracking_interval_secs: 15.0  # Longer intervals for GRVT
        tracking_timeout_secs: 90.0
        cancel_wait_secs: 15.0
        reduce_only_probe: true

      # Test market mode - market order roundtrip
      - venue: "grvt"
        symbol: "BTC"
        mode: "market"
        side: "buy"
        min_multiplier: 1.0

      # Test ETH perpetual
      - venue: "grvt"
        symbol: "ETH"
        mode: "limit_once"
        side: "sell"
        min_multiplier: 1.0
        price_offset_ticks: 3
        tracking_timeout_secs: 30.0
        cancel_wait_secs: 12.0

      # Test SOL if available
      - venue: "grvt"
        symbol: "SOL"
        mode: "market"
        side: "buy"
        min_multiplier: 1.0

connectors:
  grvt:
    base_url: ""  # Will use SDK default
    # GRVT uses environment variables or keys file
    # XTB_GRVT_ENV: "prod" or "testnet"
    # XTB_GRVT_KEYS_FILE: path to keys file

general:
  debug: true
  log_level: "DEBUG"

# GRVT-specific notes:
# - Uses grvt-pysdk with GrvtCcxtPro/GrvtCcxtWS
# - Supports both prod and testnet environments
# - Keys file format:
#   Trading Account ID: <account_id>
#   API Key: <api_key>
#   Secret Private Key: <private_key>
# - Environment variables:
#   XTB_GRVT_ENV=prod|testnet
#   XTB_GRVT_KEYS_FILE=path/to/Grvt_key.txt

# Output generates enhanced reports with:
# - Price timeline tracking
# - Order state transition analysis
# - Race condition detection
# - Arbitrage window timing analysis
# - Timeline summaries with engine_ts/cancel_ack_ts/ws_seq
# - GRVT-specific: SDK integration validation, environment switching