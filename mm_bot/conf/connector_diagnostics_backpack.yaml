# Connector diagnostics configuration
# Enhanced smoke test with observability and timeline tracking

strategy:
  name: "connector_diagnostics"
  connector_diagnostics:
    test_mode: true
    pause_between_tests_secs: 3.0
    tasks:
      # Test limit_once mode - single limit order placement and cancellation
      - venue: "backpack"
        symbol: "BTC"
        mode: "limit_once"
        side: "buy"
        min_multiplier: 1.0
        price_offset_ticks: 5  # Place 5 ticks away from best
        tracking_timeout_secs: 30.0
        cancel_wait_secs: 20.0

      # Test tracking_limit mode - continuous limit order tracking
      - venue: "backpack"
        symbol: "BTC"
        mode: "tracking_limit"
        side: "buy"
        min_multiplier: 1.0
        price_offset_ticks: 3
        tracking_interval_secs: 10.0
        tracking_timeout_secs: 60.0
        cancel_wait_secs: 20.0
        reduce_only_probe: false

      # Test market mode - market order roundtrip
      - venue: "backpack"
        symbol: "BTC"
        mode: "market"
        side: "buy"
        min_multiplier: 1.0

connectors:
  backpack:
    keys_file: "Backpack_key.txt"
    base_url: "https://api.backpack.exchange"
    rpm: 100
    retries: 3

general:
  debug: true
  log_level: "DEBUG"

# Output generates enhanced reports with:
# - Price timeline tracking
# - Order state transition analysis
# - Race condition detection
# - Arbitrage window timing analysis
# - Timeline summaries with engine_ts/cancel_ack_ts/ws_seq